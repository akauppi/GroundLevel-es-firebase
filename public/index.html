<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Firebase
    -   - latest versions -> https://firebase.google.com/support/release-notes/js
    -
    - Note: Firebase is loaded in 'index.html' because the '/__/' method allows us to get configuration nicely, both
    -     in development and when deployed via Firebase Hosting. Other CDN-based code is imported via Rollup paths.
    -
    - Include only the Firebase features that you need.
    -
    - Note: Firebase docs mention to put this in the 'body' - instead of 'head'. Is there a benefit for doing so?
    -->
    <script defer src="/__/firebase/7.8.0/firebase-app.js"></script>
    <script defer src="/__/firebase/7.8.0/firebase-auth.js"></script>
    <!--
    <script defer src="/__/firebase/7.8.0/firebase-database.js"></script>
    <script defer src="/__/firebase/7.8.0/firebase-messaging.js"></script>
    <script defer src="/__/firebase/7.8.0/firebase-storage.js"></script>
    -->

    <!--
    // tbd. If we can make 'import "firebase/app"' get something, and 'import "firebase/auth"' get something else,
    //    that'd allow Firebase UI to be loaded via 'npm' - which liiiiikely would be the best way (tree-shaking).
    //    #help 0)
    -->

    <!-- initialize the SDK (keep last) -->
    <script defer src="/__/firebase/init.js"></script>

    <!-- Firebase UI
    -
    - Disclaimer: We TRIED to make this load via 'import' but both approaches were problematic:
    -   a) via 'rollup.config.js' mapping; CSS wouldn't load
    -   b) via 'npm', it'd want 'firebase/app' and 'firebase/auth' as imported dependencies, but we already have them
    -      here, via CDN.
    -
    - So (for now??) let's swallow pride and load it here. #gulp
    -
    - The damage?
    -   - .js (ESM) is 200kB
    -   - .css is 40kB
    -
    -   'npm' dependency would likely also allow tree-shaking, keeping only the code needed for the authentication
    -   methods we actually want to use.
    -->
    <script src="https://www.gstatic.com/firebasejs/ui/4.4.0/firebase-ui-auth.js"></script>
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/4.4.0/firebase-ui-auth.css" />

    <!-- Application
    -
    - tbd. Write that out. Do we initialize the bundle anyhow also after DOM has loaded? Then no need for the Firebase promise.
    -->
    <script type="module" src="/bundle.esm.js"></script>
  </head>

  <body>
    <app></app>
  </body>
</html>
