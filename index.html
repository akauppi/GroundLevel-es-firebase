<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!--PROD Favicon
    <link rel="icon" type="image/png" href="favicon.png">
    -->

    <!-- tbd. make 'set' work if we generate both 'index.dev.html' and 'index.html' (production)
    -   from the same source.
    -->
    <!--SET DEV,PROD $FB_UI https://www.gstatic.com/firebasejs/ui/4.5.0 -->

    <!--
    - Firebase UI
    -   - latest versions -> https://github.com/firebase/firebaseui-web/releases
    -
    - This is only needed in 'SignIn.vue', but there's no injection to 'head' in Vue.js (seems, by design?) so in
    - development it was easiest to have it here. It likely gets cached, and everyone needs to come through the
    - signin at some point, so there's little benefit in injecting it just for that one page.
    -
    - See discussion -> https://stackoverflow.com/questions/41710898/injecting-into-head-in-vue-js
    -->
    <!--DEV,PROD -->
    <script defer src="https://www.gstatic.com/firebasejs/ui/4.5.0/firebase-ui-auth.js"></script>
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/4.5.0/firebase-ui-auth.css" />
    <!-- -->

    <!--
    - Set up globals
    -
    - Some things don't need to come via the 'import' mechanism. These are better to set up already here, since
    - 'import's get evaluated at once for a module, and modules neeeding the globals would faint.
    -->
    <script type="module">
      function assert(cond) {
        if (!cond) {
          debugger;   // allows us to see the 'call stack' in browser
          throw "Assertion failed!";
        }
      }

      //--- Firebase
      //
      import firebase from 'firebase/app';
      import 'firebase/auth';
      import 'firebase/firestore';

      /* tbd. if PRODUCTION, read config from here (presuming we use Firebase hosting):
      "/__/firebase/init.js"
      */
      import config from "/__.js"

      firebase.initializeApp(config);

      //--- Globals
      window.assert = assert
      window.firebase = firebase
    </script>

    <!--PROD Application
    <script type="module" src="/dist/bundle.esm.js"></script>
    -->
    <!--DEV Application -->
    <script type="module" src="/src/main.js"></script>
    <!-- -->
  </head>

  <body>
    <div id="app"></div>
  </body>
</html>
